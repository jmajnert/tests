<html>
<head>
<title>Trigger 2 downloads</title>
<script>
function triggerDownload(id) {
  // Based on http://stackoverflow.com/a/27280611
  var a = document.createElement('a');
  a.download = "test-image-"+id+".png";
  a.href = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAABC0lEQVQYlTXPPUsCYQDA8b/e04tdQR5ZBpE3NAR6S0SDVDZKDQ2BY9TUy1foE0TQ1Edo6hOEkyUG0QuBRtQgl0hnenVdnZD5eLbU7xv8Avy5X16KhrQBg47EtpziXO6qBhAEeNEm0qr7VdBcLxt2mlnNbhVu0NMAgdj1wvjOoX2xdSt0L7MGgx2GGid8yLrJvJMUkbKfOF8N68bUIqcz2wQR7GUcYvJIr1dFQijvkh89xGV6BPPMwvMF/nQXJMgWiM+KLPX2tc0HNa/HUxDv2owpx7xV+023Hiwpdt7yhmcjj9/NdrIhn8LrPVmotctWVd01Nt27wH9T3YhHU5O+sT/6SuVZKa4cNGoAv/ZMas7pC/KaAAAAAElFTkSuQmCC";
  a.click();
}
function getNotificationPermission() {
  Notification.requestPermission().then(function(result) {
    if (result === 'denied') {
      console.log('Permission wasn\'t granted. Allow a retry.');
      return;
    }
    if (result === 'default') {
      console.log('The permission request was dismissed.');
      return;
    }
    // Do something with the granted permission.
  });
}
function getMicrophonePermission() {
  navigator.mediaDevices.getUserMedia({ audio: true })
      .then(function(stream) {
        console.log('You let me use your mic!')
      })
      .catch(function(err) {
        console.log('No mic for you!')
      });
}
function triggerPermissionDialogs() {
  if (document.getElementById("download1").checked) triggerDownload(1);
}

</script>
</head>
<body>
  <div><input type="checkbox" id="download1"><label for="download1">Download 1</label></div>
  <div><input type="checkbox" id="download2"><label for="download2">Download 2</label></div>
  <div><input type="checkbox" id="notifications"><label for="notifications">Notifications</label></div>
  <div><input type="checkbox" id="microphone"><label for="microphone">Microphone</label></div>
  <div><input type="button" value="Request permissions" onclick="triggerPermissionDialogs()"></div>
</body>
</html>
